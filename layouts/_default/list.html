{{ define "main" }}

<div class="page-header">
  <div class="container">
    <h1>{{ .Title }}</h1>
    {{ with .Description }}<p>{{ . }}</p>{{ end }}
  </div>
</div>

<section class="section">
  <div class="container">
    {{ if eq .Section "blog" }}
    {{ $fallbackImg := resources.Get "images/gallery/gallery-cookies.jpg" }}
    {{ $fallbackWebp := $fallbackImg.Fill "600x380 webp q80" }}
    {{ $fallbackJpeg := $fallbackImg.Fill "600x380 jpeg q80" }}
    <div class="blog-grid">
      {{ range .Pages }}
      <a href="{{ .Permalink }}" class="blog-card fade">
        <div class="blog-card-img">
          {{ with .Params.image }}
            <img src="{{ . }}" alt="{{ $.Title }}" width="600" height="380" loading="lazy" decoding="async">
          {{ else }}
            <picture>
              <source type="image/webp" srcset="{{ $fallbackWebp.RelPermalink }}">
              <img src="{{ $fallbackJpeg.RelPermalink }}" alt="{{ .Title }}" width="600" height="380" loading="lazy" decoding="async">
            </picture>
          {{ end }}
        </div>
        <div>
          <time>{{ .Date.Format "Jan 2, 2006" }}</time>
          <h3>{{ .Title }}</h3>
          <p>{{ .Description }}</p>
        </div>
      </a>
      {{ end }}
    </div>
    {{ else }}
    <div class="article-content">
      {{ .Content }}
    </div>
    {{ end }}
  </div>
</section>

{{ end }}
